<!DOCTYPE html>
<html>
    <head>
        <title>Demo AWS Prototyping</title>
        <style>
        .button {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 4px;
        }
        .button:active {
            opacity:0.6;
        }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body style="padding:20px;">

        <h2>Demo</h2>
        <input type="text" id="start_insp" placeholder="Insert the inspection ID" style="font-size: 18px;"/>
        <br/><br/>
        <button class="button" onclick="start_data()">START</button>
        <br/>
        <button class="button" style="background-color: #dde3e6;float: left;color:rgba(0, 0, 0, 0.6)" onclick="publish_tel()">Capture telemetries</button>
        <button class="button" style="background-color: #dde3e6;color:rgba(0, 0, 0, 0.6)" onclick="publish_img()">Capture image</button>
        <br/>
        <button class="button" style="background-color: #008CBA;" onclick="get_data()">GET DATA</button>
        <br/>
        <button class="button" style="background-color: #2c2b2b;" onclick="export_data()">EXPORT</button>
        <br/>
        <button class="button" style="background-color: #f44336;" onclick="stop_data()">STOP</button>
        <br/>

        <script>
        function start_data(){ 
                var inspection_id = document.getElementById('start_insp').value;
                var settings = {
                    'cache': false,
                    'dataType': "jsonp",
                    "async": true,
                    "crossDomain": true,
                    "url": "http://10.21.95.66:8000/inspection/start?inspection_id="+inspection_id,
                    "method": "GET",
                    "headers": {
                        "accept": "application/json",
                        "Access-Control-Allow-Origin":"*"
                    }
                }

                $.ajax(settings).done(function (response) {
                    console.log(response);
                });
            }

            function stop_data(e){ 
                var settings = {
                    'cache': false,
                    'dataType': "jsonp",
                    "async": true,
                    "crossDomain": true,
                    "url": "http://10.21.95.66:8000/inspection/stop",
                    "method": "GET",
                    "headers": {
                        "accept": "application/json",
                        "Access-Control-Allow-Origin":"*"
                    }
                }

                $.ajax(settings).done(function (response) {
                    console.log(response);
                });
            }

            function get_data(e){ 
                var inspection_id = document.getElementById('start_insp').value;
                window.open("http://10.21.95.66:8000/data/get?inspection_id="+inspection_id, '_blank');
            }

            function export_data(e){ 
                var inspection_id = document.getElementById('start_insp').value;
                var settings = {
                    'cache': false,
                    'dataType': "jsonp",
                    "async": true,
                    "crossDomain": true,
                    "url": "http://10.21.95.66:8000/data/export?inspection_id="+inspection_id,
                    "method": "GET",
                    "headers": {
                        "accept": "application/json",
                        "Access-Control-Allow-Origin":"*"
                    }
                }

                $.ajax(settings).done(function (response) {
                    console.log(response);
                });
            }


            function publish_tel(e){ 
                var settings = {
                    'cache': false,
                    'dataType': "jsonp",
                    "async": true,
                    "crossDomain": true,
                    "url": "http://10.21.95.66:8000/publishTest",
                    "method": "GET",
                    "headers": {
                        "accept": "application/json",
                        "Access-Control-Allow-Origin":"*"
                    }
                }

                $.ajax(settings).done(function (response) {
                    console.log(response);
                });
            }
            function publish_img(e){ 
                var settings = {
                    'cache': false,
                    'dataType': "jsonp",
                    "async": true,
                    "crossDomain": true,
                    "url": "http://10.21.95.66:8000/publishImageTest",
                    "method": "GET",
                    "headers": {
                        "accept": "application/json",
                        "Access-Control-Allow-Origin":"*"
                    }
                }

                $.ajax(settings).done(function (response) {
                    console.log(response);
                });
            }
        </script>
    </body>
</html>